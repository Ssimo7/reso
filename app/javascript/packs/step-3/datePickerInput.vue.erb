<template>
  <div class="ui form">
    <div class="field required">
      <label>DATE</label>
      <div class="ui calendar">
        <div class="ui input left icon" style="position: relative;">
          <i class="calendar icon"></i>
          <input placeholder="dd/mm/yyyy"
          v-bind:class="{ visible: showPopup }"
          @click="showPopup = !showPopup">

          <div class="ui popup bottom left"
            v-bind:class="{ visible: showPopup, hidden: !showPopup }"
            style="position: absolute; top: 100%; left: 0px; width: auto; padding: 0px">

            <table class="ui very compact fixed table center aligned"
            style="margin: 0px; border:none; border-radius:inherit">
              <thead>
                <tr>
                  <th colspan="1" class="smaller center aligned">
                    <span
                      @click=""
                      class="prev"
                      v-bind:class="{ 'disabled' : false }">
                      &lt;
                    </span>
                  </th>
                  <th colspan="5" @click="" class="smaller center aligned">
                    {{ currMonthName }} {{ currYear }}
                  </th>
                  <th colspan="1" class="smaller center aligned">
                    <span
                      @click=""
                      class="next"
                      v-bind:class="{ 'disabled' : false }">
                      &gt;
                    </span>
                  </th>
                </tr>
                <tr>
                  <th class="smallest center aligned">L</th>
                  <th class="smallest center aligned">M</th>
                  <th class="smallest center aligned">M</th>
                  <th class="smallest center aligned">J</th>
                  <th class="smallest center aligned">V</th>
                  <th class="smallest center aligned">S</th>
                  <th class="smallest center aligned">D</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="weekDays in currentMonthDays">
                  <td v-for="day in weekDays"
                   v-bind:class="{ 'disabled' : !day.inCurrentMonth,
                    'selectedDay' : day.selected, 'notSelectedDay': !day.selected}"
                    @click="clickedOnDay(day)">{{day.day}}</td>
                </tr>
              </tbody>
            </table>

          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
    import DateUtils from './Utils/dateUtils'

    export default {
        name: 'date-picker-input',
        props: {
        },
        data () {
          return {
            showPopup: false,
            currMonthName: 'Juillet',
            currYear: '2017',
            currentMonthDays:[]
          }
        },
        computed: {
        },
        methods: {
            clickedOnDay: function(day) {
                this.dateUtils.selectDay(day)
                this.currentMonthDays = this.dateUtils.daysOfMonth
            }
        },
        mounted () {
            this.dateUtils = new DateUtils(new Date())
            this.currentMonthDays = this.dateUtils.daysOfMonth
        }
    }
</script>


<style lang="sass">
  .ui[class*="very compact"].table th.smaller
    padding: 0.6em
    font-weight: 800
    font-size: 1.1em
    border: none
  .ui[class*="very compact"].table th.smallest
    padding: 0.3em
    font-weight: 600
    border: none

  td.selectedDay
    color: #85B7D9
    border: 1px solid #85B7D9 !important
  td.notSelectedDay
    border-top: 1px solid rgba(34, 36, 38, 0.1) !important
    border-bottom: 1px solid rgba(255,255,255,0) !important
</style>