<template>
  <div>
    <div class="ui form">
      <div class="field required" v-bind:class="{ error: !isDateCompleted && showFormFieldErrors, disabled: areModificationDisabled }">
        <label><%= I18n.t('diagnoses.step3.date') %></label>
        <date-input v-model="visitDate"></date-input>

      </div>
    </div>
  </div>
</template>

<script>
import { mapState, mapGetters, mapMutations } from 'vuex'
import * as types from './store/mutationTypes'
import dateInput from './utils/dateInput.vue.erb'

export default {
  name: 'visit-date-input',
  components: {
    'date-input': dateInput
  },
  computed: {
    ...mapState({
      storeVisitDate: state => state.step3Store.visitDate,
      showFormFieldErrors: state => state.step3Store.showFormFieldErrors
    }),
    ...mapGetters({
      isDateCompleted: 'isDateCompleted',
      areModificationDisabled: 'areModificationDisabled',
    }),
    visitDate: {
      get () {
        return this.storeVisitDate
      },
      set (value) {
        this.setVisitDate(value)
      }
    }
  },
  methods: {
    ...mapMutations({
      setVisitDate: types.VISIT_DATE
    })
  }
}
</script>

<style lang="sass">
</style>
