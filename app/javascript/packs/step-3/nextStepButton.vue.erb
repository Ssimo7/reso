<template>
  <button class="ui teal right labeled icon button right floated"
  v-bind:class="{ loading: isRequestInProgress, disabled: isRequestInProgress }"
  @click="nextStepButtonClicked">
    <label><%= I18n.t('next_step') %></label>
    <i class="arrow right icon"></i>
  </button>
</template>

<script>
    import { mapState, mapMutations, mapActions } from 'vuex'
    import * as types from './store/mutationTypes'

    export default {
        name: 'next-step-button',
        computed: {
            ...mapState({
                isRequestInProgress: state => state.step3Store.isRequestInProgress,
                diagnosisId: state => state.step3Store.diagnosisId
            })
        },
        methods: {
            nextStepButtonClicked: function () {
                this.launchNextStep()
                .then(() => {
                    Turbolinks.visit(`/diagnoses/${this.diagnosisId}/step-4`)
                })
                .catch((error) => {
                })
            },
            ...mapActions([
                'launchNextStep'
            ])
        }
    }
</script>

<style lang="sass">
  button
    margin-top: 1em !important
</style>