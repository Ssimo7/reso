<template>
  <button class="ui teal right labeled icon button right floated"
  v-bind:class="{ loading: this.isRequestInProgress, disabled: this.isRequestInProgress }"
  @click="nextStepButtonClicked">
    BLABLABLA
    <i class="arrow right icon"></i>
  </button>
</template>

<script>
    import { mapState, mapMutations, mapActions } from 'vuex'
    import * as types from './store/mutationTypes'

    export default {
        name: 'next-step-button',
        computed: {
            ...mapState({
                diagnosisContent: state => state.step2Store.diagnosisContent,
                isRequestInProgress: state => state.step2Store.isDiagnosisRequestUnderWay
            })
        },
        methods: {
            nextStepButtonClicked: function () {
                this.sendDiagnosisContentUdpate()
                .then( () => {
                    Turbolinks.visit('/')
                });
            },
            ...mapMutations({
                setRequestInProgress: types.DIAGNOSTIC_REQUEST_UNDERWAY
            }),
            ...mapActions([
                'sendDiagnosisContentUdpate'
            ])
        }
    }
</script>

<style lang="sass">
</style>